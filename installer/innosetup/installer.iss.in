; SPDX-FileCopyrightText: Copyright (C) swift Project Community / Contributors
; SPDX-License-Identifier: CC0-1.0

; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

#define SwiftAppName "swift pilotclient"
#define SwiftAppVersion "${SWIFT_VERSION_MAJOR}.${SWIFT_VERSION_MINOR}.${SWIFT_VERSION_REVISION}"
#define SwiftAppPublisher "swift Project Community / Contributors"
#define SwiftAppURL "https://github.com/swift-project/pilotclient"

[Setup]
AppId={{D73DEBD9-D829-41EC-AFE4-419C20D3DDD7}
AppName={#SwiftAppName}
AppVersion={#SwiftAppVersion}
;AppVerName={#SwiftAppName} {#SwiftAppVersion}
AppPublisher={#SwiftAppPublisher}
AppPublisherURL={#SwiftAppURL}
AppSupportURL={#SwiftAppURL}
AppUpdatesURL={#SwiftAppURL}
DefaultDirName={autopf}\swift
DefaultGroupName={#SwiftAppName}
ArchitecturesInstallIn64BitMode=x64compatible
LicenseFile=Installer_License.txt
; Uncomment the following line to run in non administrative install mode (install for current user only.)
;PrivilegesRequired=lowest
OutputBaseFilename=swiftinstaller-{#SwiftAppVersion}
Compression=lzma
SolidCompression=yes
WizardStyle=modern

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Types]
Name: "full"; Description: "Full installation"
Name: "custom"; Description: "Custom installation"; Flags: iscustom

[Tasks]
Name: "install_vc_redist"; Description: "Install Visual Studio Redistributables";

[Run]
Filename: "{app}/vcredist/vc_redist.x64.exe"; Tasks: install_vc_redist; StatusMsg: "Installing Visual Studio Redistributables"
Filename: "{app}/bin/swiftlauncher.exe"; Description: Start swiftlauncher; Flags: postinstall nowait

[Components]
Name: "main"; Description: "swift pilotclient"; Types: full custom; Flags: fixed
Name: "plugins"; Description: "Simulator Plugins"; Types: full
Name: "plugins\msfs"; Description: "Microsoft Flightsimulator 2020"; Types: full
Name: "plugins\p3d"; Description: "Prepar3D"; Types: full
Name: "plugins\flightgear"; Description: "FlightGear"; Types: full
Name: "plugins\xplane"; Description: "X-Plane"; Types: full
Name: "csl2xsb"; Description: "CSL2XSB Converter Script"; Types: full

[Icons]
Name: "{group}\swiftcore"; Filename: "{app}\bin\swiftcore.exe"; WorkingDir: "{app}"
Name: "{group}\swiftgui"; Filename: "{app}\bin\swiftguistd.exe"; WorkingDir: "{app}"
Name: "{group}\swiftdata"; Filename: "{app}\bin\swiftdata.exe"; WorkingDir: "{app}"
Name: "{group}\swiftlauncher"; Filename: "{app}\bin\swiftlauncher.exe"; WorkingDir: "{app}"
Name: "{commondesktop}\swiftlauncher"; Filename: "{app}\bin\swiftlauncher.exe"; WorkingDir: "{app}"

[Files]
; executables
Source: "..\..\dist\bin\swiftcore.exe"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\swiftguistd.exe"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\swiftdata.exe"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\swiftlauncher.exe"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\swift_crashpad_handler.exe"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\dbus-daemon.exe"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\7za.exe"; DestDir: "{app}\bin"; Flags: ignoreversion

; libraries
Source: "..\..\dist\bin\core.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\gui.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\fscommon.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\fsxcommon.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\input.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\misc.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\plugincommon.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\sound.dll"; DestDir: "{app}\bin"; Flags: ignoreversion

; plugins
Source: "..\..\dist\bin\plugins\simulator\simulatorflightgear.dll"; DestDir: "{app}\bin\plugins\simulator"; Flags: ignoreversion; Components: plugins\flightgear
Source: "..\..\dist\bin\plugins\simulator\simulatorflightgearconfig.dll"; DestDir: "{app}\bin\plugins\simulator"; Flags: ignoreversion; Components: plugins\flightgear
Source: "..\..\dist\bin\plugins\simulator\simulatormsfs.dll"; DestDir: "{app}\bin\plugins\simulator"; Flags: ignoreversion; Components: plugins/msfs
Source: "..\..\dist\bin\plugins\simulator\simulatorp3d.dll"; DestDir: "{app}\bin\plugins\simulator"; Flags: ignoreversion; Components: plugins\p3d plugins/msfs
Source: "..\..\dist\bin\plugins\simulator\simulatorp3dconfig.dll"; DestDir: "{app}\bin\plugins\simulator"; Flags: ignoreversion; Components: plugins\p3d plugins\msfs
Source: "..\..\dist\bin\plugins\simulator\simulatorxplane.dll"; DestDir: "{app}\bin\plugins\simulator"; Flags: ignoreversion; Components: plugins\xplane
Source: "..\..\dist\bin\plugins\simulator\simulatorxplaneconfig.dll"; DestDir: "{app}\bin\plugins\simulator"; Flags: ignoreversion; Components: plugins\xplane
Source: "..\..\dist\bin\SimConnect.MSFS.dll"; DestDir: "{app}\bin"; Flags: ignoreversion; Components: plugins\msfs
Source: "..\..\dist\bin\SimConnect.P3D-v4.0.dll"; DestDir: "{app}\bin"; Flags: ignoreversion; Components: plugins\p3d
Source: "..\..\dist\bin\SimConnect.P3D-v4.1.dll"; DestDir: "{app}\bin"; Flags: ignoreversion; Components: plugins\p3d
Source: "..\..\dist\bin\SimConnect.P3D-v4.2.dll"; DestDir: "{app}\bin"; Flags: ignoreversion; Components: plugins\p3d
Source: "..\..\dist\bin\SimConnect.P3D-v4.3.dll"; DestDir: "{app}\bin"; Flags: ignoreversion; Components: plugins\p3d
Source: "..\..\dist\bin\SimConnect.P3D-v4.5.dll"; DestDir: "{app}\bin"; Flags: ignoreversion; Components: plugins\p3d

; third-party dependencies
Source: "..\..\dist\bin\dbus-1-3.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\vatsimauth.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\libsodium.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\opus.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\Qt6Core.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\Qt6Core5Compat.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\Qt6DBus.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\Qt6Gui.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\Qt6Multimedia.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\Qt6Network.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\Qt6OpenGL.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\Qt6Qml.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\Qt6Svg.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\Qt6Widgets.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\Qt6Xml.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\dist\bin\iconengines\qsvgicon.dll"; DestDir: "{app}\bin\iconengines"; Flags: ignoreversion
Source: "..\..\dist\bin\imageformats\qgif.dll"; DestDir: "{app}\bin\imageformats"; Flags: ignoreversion
Source: "..\..\dist\bin\imageformats\qico.dll"; DestDir: "{app}\bin\imageformats"; Flags: ignoreversion
Source: "..\..\dist\bin\imageformats\qjpeg.dll"; DestDir: "{app}\bin\imageformats"; Flags: ignoreversion
Source: "..\..\dist\bin\imageformats\qsvg.dll"; DestDir: "{app}\bin\imageformats"; Flags: ignoreversion
Source: "..\..\dist\bin\platforms\qwindows.dll"; DestDir: "{app}\bin\platforms"; Flags: ignoreversion
Source: "..\..\dist\bin\styles\qmodernwindowsstyle.dll"; DestDir: "{app}\bin\styles"; Flags: ignoreversion
Source: "..\..\dist\bin\tls\qcertonlybackend.dll"; DestDir: "{app}\bin\tls"; Flags: ignoreversion
Source: "..\..\dist\bin\tls\qschannelbackend.dll"; DestDir: "{app}\bin\tls"; Flags: ignoreversion
Source: "..\..\dist\vcredist\vc_redist.x64.exe"; DestDir: "{app}\vcredist"; Flags: ignoreversion

; resources/share
Source: "..\..\dist\share\CSL2XSB\*"; DestDir: "{app}\share\CSL2XSB"; Flags: ignoreversion recursesubdirs; Components: csl2xsb
Source: "..\..\dist\share\*"; DestDir: "{app}\share"; Flags: ignoreversion recursesubdirs; Excludes: "test\*,CSL2XSB\*"
